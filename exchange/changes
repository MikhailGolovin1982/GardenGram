SELL_WORDS = [
    "продам", "отдам", "уступлю", "передам",
    "освободился", "освобождается", "свободен"
]

EVENT_WORDS = [
    "иремель", "большой иремель", "б.иремель",
    "big iremel", "iremel"
]

DIST_WORDS = [
    "27", "27км", "27 км", "27к"
]

EXCLUDE_WORDS = [
    "ищу", "куплю", "нужен", "возьму",
    "кто продаст", "кто продает", "кто продаёт",
    "есть ли", "подскажите", "где купить"
]


def is_target_message(text: str) -> bool:
    t = text.lower()

    # Исключаем сообщения “ищу/куплю/нужен…”
    if any(x in t for x in EXCLUDE_WORDS):
        return False

    # Должно быть: слово продажи + название события + дистанция
    has_sell = any(x in t for x in SELL_WORDS)
    has_event = any(x in t for x in EVENT_WORDS)
    has_dist = any(x in t for x in DIST_WORDS)

    return has_sell and has_event and has_dist
