@client.on(events.NewMessage(chats=TARGET_CHAT))
async def handler(event):
    if not is_target_message(event.raw_text):
        return

    # –ù–µ –æ—Ç–≤–µ—á–∞–µ–º –Ω–∞ —Å–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
    me = await client.get_me()
    if event.sender_id == me.id:
        return

    sender = await event.get_sender()
    sender_name = getattr(sender, "first_name", "") or "Unknown"

    notify_text = (
        "üîî –ù–∞–π–¥–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ —Å–ª–æ—Ç\n"
        f"üë§ –ê–≤—Ç–æ—Ä: {sender_name}\n"
        f"üí¨ –¢–µ–∫—Å—Ç: {event.raw_text}"
    )

    print("\n" + notify_text)
    print("-" * 40)

    # 1Ô∏è‚É£ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–µ–±–µ
    await client.send_message("me", notify_text)

    # 2Ô∏è‚É£ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ —á–∞—Ç (reply)
    reply_text = "–ë–µ—Ä—É —Å–ª–æ—Ç. –ì–æ—Ç–æ–≤ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏. –ù–∞–ø–∏—Å–∞–ª –≤ –ª–∏—á–∫—É."
    await event.reply(reply_text)
